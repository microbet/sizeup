<VirtualHost *:80>
  ServerName www.sizeup.com
  ServerAlias www.beta.sizeup.com  # for testing only
  DocumentRoot /var/www/html
  RewriteEngine on

  ### Application site URLs

  RewriteRule ^/accessibility/?(.*) https://application.sizeup.com/accessibility/$1 [R=301,L]
  RewriteRule ^/advertising/?(.*) https://application.sizeup.com/advertising/$1 [R=301,L]
  RewriteRule ^/bestPlaces/?(.*) https://directory.sizeup.com/bestPlaces/$1 [R=301,L]
  RewriteRule ^/business/?(.*) https://directory.sizeup.com/business/$1 [R=301,L]
  RewriteRule ^/community/?(.*) https://directory.sizeup.com/community/$1 [R=301,L]
  RewriteRule ^/competition/?(.*) https://application.sizeup.com/competition/$1 [R=301,L]
  RewriteRule ^/dashboard/?(.*) https://application.sizeup.com/dashboard/$1 [R=301,L]
  RewriteRule ^/find-business/?(.*) https://directory.sizeup.com/find-business/$1 [R=301,L]
  RewriteRule ^/find-community/?(.*) https://directory.sizeup.com/find-community/$1 [R=301,L]
  RewriteRule ^/user/?(.*) https://application.sizeup.com/user/$1 [R=301,L]
  RewriteRule ^/widget/?(.*) https://application.sizeup.com/widget/$1 [R=301,L]

  RewriteRule ^/developers/documentation https://application.sizeup.com/developers/documentation/$1 [R=302,L]

  ### Orphaned URLs (none known ... at the moment)

  ### API key repository (temporary)

  RewriteRule ^/developers/keystore/bbthackers/?(.*) /bbthackers/$1 [L]
  <Directory "/var/www/html/bbthackers">
    AuthType Basic
    AuthName "SizeUp API keystore"
    AuthUserFile /var/www/htpasswd
    Require valid-user
  </Directory>

  ### Everything else is proxied to the corporate site

  # See manually added mod_proxy_html.conf
  RewriteRule ^/?(.*)$ http://corporate.sizeup.com/$1 [P]
  ProxyPassReverse / http://corporate.sizeup.com/

  # Note we may need mod_proxy_html for proper testing,
  # but I hope we can configure corporate
  # site so that we don't need that. 
  # Also ... the Salient page is too complex.
  # Undecodable content comes through.
  #ProxyHTMLEnable On
  #ProxyHTMLCharsetOut *
  #ProxyHTMLURLMap http://corporate.sizeup.com http://www.sizeup.com

  ErrorLog ${APACHE_LOG_DIR}/dispatch-error.log
  CustomLog ${APACHE_LOG_DIR}/dispatch-access.log combined

</VirtualHost>

### Retired hostnames

<VirtualHost *:80>
  ServerName lbi.sizeup.com
  ServerAlias sizeuplbi.com www.sizeuplbi.com
  RewriteEngine on
  RewriteRule .? https://www.sizeup.com/product-and-industries/industries-served/ [R=301,L]
  ErrorLog ${APACHE_LOG_DIR}/dispatch-error.log
  CustomLog ${APACHE_LOG_DIR}/dispatch-access.log combined
</VirtualHost>

<VirtualHost *:80>
  ServerName news.sizeup.com
  RewriteEngine on
  RewriteRule ^/$ https://www.sizeup.com/company/news/ [R=301,L]
  RewriteRule ^/?(.*)$ https://www.sizeup.com/$1 [R=301,L]
  ErrorLog ${APACHE_LOG_DIR}/dispatch-error.log
  CustomLog ${APACHE_LOG_DIR}/dispatch-access.log combined
</VirtualHost> 


# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
