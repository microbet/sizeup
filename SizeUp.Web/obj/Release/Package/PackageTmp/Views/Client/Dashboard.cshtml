@*@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_LayoutBare.cshtml";
}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.js"></script>
        <script type="text/javascript" src="~/Scripts/thirdParty/jquery.ba-hashchange.js"></script>       
        
        <!-- Wizard_2_NearbyCitiesCounties -->

        <link rel='stylesheet' type='text/css' href='~/Content/thirdParty/skin/ui.dynatree.css'>
        <script type="text/javascript" src="~/Scripts/thirdParty/jquery.cookie.js"></script>
        <script src='~/Scripts/thirdParty/jquery.dynatree.min.js' type="text/javascript"></script>

@{
    ViewBag.Title = "_LeftNav";
    Layout = "~/Views/Shared/_LayoutBare.cshtml";
}
        <style>
        body
        {
            background-color: #f7f7f7;
            font-family: "Francois One", Helvetica, Arial, sans-serif;
        }

        label.custom {
            width: 200px !important;
            text-align: right;
            margin-right: 10px;
        }

        input.custom {
            width: 200px !important;
            text-align: left;
            margin-left: 10px;
        }

        h1 {
            font-family: "Francois One",Helvetica,Arial,sans-serif;
            font-weight: normal;
            margin-right: 10px;
            padding-bottom:  10px !important;
        }

        .wrapper
        {
            width: 960px;
            margin: 0px auto;
            padding-top: 20px;
            min-height: 600px;
        }

        .wrapper h1, .wrapper h4, .wrapper p, .wrapper pre, .wrapper ul, .wrapper li
        {
            margin: 0;
            padding: 0;
            border: 0;
            vertical-align: baseline;
            background: transparent;
        }

        .wrapper li
        {
            outline: 0;
            text-decoration: none;
            -webkit-transition-property: background color;
            -moz-transition-property: background color;
            -o-transition-property: background color;
            -ms-transition-property: background color;
            transition-property: background color;
            -webkit-transition-duration: 0.12s;
            -moz-transition-duration: 0.12s;
            -o-transition-duration: 0.12s;
            -ms-transition-duration: 0.12s;
            transition-duration: 0.12s;
            -webkit-transition-timing-function: ease-out;
            -moz-transition-timing-function: ease-out;
            -o-transition-timing-function: ease-out;
            -ms-transition-timing-function: ease-out;
            transition-timing-function: ease-out;
        }

        #v-nav
        {
            height: 100%;
            margin: auto;
            color: #333;
            font: 12px/18px "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        }

        #v-nav h2 {
            float: left;
            width: 50%;
        }

        #v-nav >ul
        {
            float: left;
            width: 210px;
            display: block;
            position: relative;
            top: 0;
            border: 1px solid #DDD;
            border-right-width: 0;
            margin: auto 0 !important;
            padding:0;
        }

        #v-nav >ul >li
        {
            width: 180px;
            list-style-type: none;
            display: block;
            text-shadow: 0px 1px 1px #F2F1F0;
            font-size: 1.11em;
            position: relative;
            border-right-width: 0;
            border-bottom: 1px solid #DDD;
            margin: auto;
            padding: 10px 15px !important;  
            background: whiteSmoke; /* Old browsers */
            background: -moz-linear-gradient(top, #ffffff 0%, #f2f2f2 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffffff), color-stop(100%, #f2f2f2)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top, #ffffff 0%, #f2f2f2 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top, #ffffff 0%, #f2f2f2 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top, #ffffff 0%, #f2f2f2 100%); /* IE10+ */
            background: linear-gradient(top, #ffffff 0%, #f2f2f2 100%); /* W3C */       
        }

        #v-nav >ul >li.current
        {
            color: black;
            border-right: none;
            z-index: 10;
            background: white !important;
            position: relative;
            moz-box-shadow: inset 0 0 35px 5px #fafbfd;
            -webkit-box-shadow: inset 0 0 35px 5px #fafbfd;
            box-shadow: inset 0 0 35px 5px #fafbfd;
        }

        #v-nav >ul >li.first.current
        {
            border-bottom: 1px solid #DDD;
        }

        #v-nav >ul >li.last
        {
            border-bottom: none;
        }

        #v-nav >div.tab-content
        {
            margin-left: 210px;
            border: 1px solid #ddd;
            background-color: #FFF;
            min-height: 400px;
            position: relative;
            z-index: 9;
            padding: 12px;
            moz-box-shadow: inset 0 0 35px 5px #fafbfd;
            -webkit-box-shadow: inset 0 0 35px 5px #fafbfd;
            box-shadow: inset 0 0 35px 5px #fafbfd;
            display: none;
            padding: 25px;
        }

        #v-nav >div.tab-content >h4
        {
            font-size: 1.2em;
            color: Black;
            text-shadow: 0px 1px 1px #F2F1F0;
            border-bottom: 1px dotted #EEEDED;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        </style>
        <!--[if IE 7]><style type="text/css">#v-nav>ul>li.current{border-right:1px solid #fff!important}#v-nav>div.tab-content{z-index:-1!important;left:0}</style><![endif]-->
        <!--[if IE 8]><style type="text/css">#v-nav>ul>li.current{border-right:1px solid #fff!important}#v-nav>div.tab-content{z-index:-1!important;left:0}</style><![endif]-->
 
        <style>   
            #slide-header {
                text-shadow: 0 1px 1px #FFFFFF;
                float:right;
                text-align:right;
                width: 50%;
                min-width:200px;
            }

            #slide-header .control-previous {
                margin-left: 0;
            }
            #slide-header .control-previous, #slide-header .control-next {
                background: url("/Content/images/buttons.png") no-repeat scroll 0 0 transparent;
                cursor: pointer;
                display: inline-block;
                height: 0;
                overflow: hidden;
                padding-top: 32px;
                vertical-align: middle;
                width: 62px;
            }
            .slide-controls {
                color: #373737;
                font-weight: bold;
            }
            
            #slide-header .control-next {
                background-position: -72px 0;
                margin-right: 0;
            }
            
        </style>
    
    </head>
    <body>
        <section id="wrapper" class="wrapper">

            <h1 class="title">LBI SizeUp Instance Setup</h1>
            
            <div id="v-nav">

                <ul>
                    <li tab="tab1" class="first current">Dashboard</li>
                    <li tab="tab2">Update Account Information</li>
                    <li tab="tab3">Update Payment Information</li>
                </ul>

                <div class="tab-content">
                    @Html.Partial("_UserDashboard")
                </div>
                <div class="tab-content">
                    Insert form to update account information (username, password, name of company, etc.)
                </div>
                <div class="tab-content">
                    @Html.Partial("_Wizard_5_CCSignup")
                </div>

                
            </div>

        </section>
        <!-- Include Scripts -->
        <script type="text/javascript" type="text/javascript">
            $(function () {
                var items = $('#v-nav>ul>li').each(function () {
                    $(this).click(function () {
                        //remove previous class and add it to clicked tab
                        items.removeClass('current');
                        $(this).addClass('current');

                        //hide all content divs and show current one
                        $('#v-nav>div.tab-content').hide().eq(items.index($(this))).show('fast');

                        window.location.hash = $(this).attr('tab');
                    });
                });

                if (location.hash) {
                    showTab(location.hash);
                }
                else {
                    showTab("tab1");
                }

                function showTab(tab) {
                    $("#v-nav ul li[tab=" + tab + "]").click();
                }

                // Bind the event hashchange, using jquery-hashchange-plugin
                $(window).hashchange(function () {
                    showTab(location.hash.replace("#", ""));
                })

                // Trigger the event hashchange on page load, using jquery-hashchange-plugin
                $(window).hashchange();
            });

        </script>
    </body>

</html>*@

@model SizeUp.Web.Models.ResourceModel
@{
    ViewBag.Title = "Dashboard";
    //Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
    Layout = "~/Views/Shared/_LayoutDashboardEditor.cshtml";
}


<div class="container">
  <div class="hero-unit1">
      <h3>Resources</h3>
	<!---
	Please read this before copying the toolbar:

	* One of the best things about this widget is that it does not impose any styling on you, and that it allows you 
	* to create a custom toolbar with the options and functions that are good for your particular use. This toolbar
	* is just an example - don't just copy it and force yourself to use the demo styling. Create your own. Read 
	* this page to understand how to customise it:
    * https://github.com/mindmup/bootstrap-wysiwyg/blob/master/README.md#customising-
	--->
	<div id="alerts"></div>
    <div class="btn-toolbar" data-role="editor-toolbar" data-target="#editor">
      
      <div class="btn-group">
        <a class="btn" data-edit="bold" title="Bold (Ctrl/Cmd+B)"><i class="icon-bold"></i></a>
        <a class="btn" data-edit="italic" title="Italic (Ctrl/Cmd+I)"><i class="icon-italic"></i></a>
        <a class="btn" data-edit="strikethrough" title="Strikethrough"><i class="icon-strikethrough"></i></a>
        <a class="btn" data-edit="underline" title="Underline (Ctrl/Cmd+U)"><i class="icon-underline"></i></a>
      </div>
      <div class="btn-group">
        <a class="btn" data-edit="insertunorderedlist" title="Bullet list"><i class="icon-list-ul"></i></a>
        <a class="btn" data-edit="insertorderedlist" title="Number list"><i class="icon-list-ol"></i></a>
      </div>
      <div class="btn-group">
		  <a class="btn dropdown-toggle" data-toggle="dropdown" title="Hyperlink"><i class="icon-link"></i></a>
		    <div class="dropdown-menu input-append">
			    <input class="span2" placeholder="URL" type="text" data-edit="createLink"/>
			    <button class="btn" type="button">Add</button>
        </div>
        <a class="btn" data-edit="unlink" title="Remove Hyperlink"><i class="icon-cut"></i></a>

      </div>
      
      <div class="btn-group">
        <a class="btn" title="Insert picture (or just drag & drop)" id="pictureBtn"><i class="icon-picture"></i></a>
        <input type="file" data-role="magic-overlay" data-target="#pictureBtn" data-edit="insertImage" />
      </div>
    </div>

    <div id="editor">
        @Html.Raw(ViewBag.Strings.Replace("<h4>Resources</h4>", ""))
    </div>
    <button id="preview-btn" type="button" class="btn btn-default" value="btn-default">Preview</button>
    <button id="save-btn" type="button" class="btn btn-default" value="btn-default">Save</button>
      <button id="reset-btn" type="button" class="btn btn-default" value="btn-default">Reset Default</button>

    <div id="preview-container" style="background-color:#F0F0F0;">
        @Html.Raw(ViewBag.Strings)
    </div>
  </div>
</div>
<script>
  $(function(){
    function initToolbarBootstrapBindings() {
      var fonts = ['Serif', 'Sans', 'Arial', 'Arial Black', 'Courier', 
            'Courier New', 'Comic Sans MS', 'Helvetica', 'Impact', 'Lucida Grande', 'Lucida Sans', 'Tahoma', 'Times',
            'Times New Roman', 'Verdana'],
            fontTarget = $('[title=Font]').siblings('.dropdown-menu');
      $.each(fonts, function (idx, fontName) {
          fontTarget.append($('<li><a data-edit="fontName ' + fontName +'" style="font-family:\''+ fontName +'\'">'+fontName + '</a></li>'));
      });
      $('a[title]').tooltip({container:'body'});
    	$('.dropdown-menu input').click(function() {return false;})
		    .change(function () {$(this).parent('.dropdown-menu').siblings('.dropdown-toggle').dropdown('toggle');})
        .keydown('esc', function () {this.value='';$(this).change();});

      $('[data-role=magic-overlay]').each(function () { 
        var overlay = $(this), target = $(overlay.data('target')); 
        overlay.css('opacity', 0).css('position', 'absolute').offset(target.offset()).width(target.outerWidth()).height(target.outerHeight());
      });
	};
	function showErrorAlert (reason, detail) {
		var msg='';
		if (reason==='unsupported-file-type') { msg = "Unsupported format " +detail; }
		else {
			console.log("error uploading file", reason, detail);
		}
		$('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>'+ 
		 '<strong>File upload error</strong> '+msg+' </div>').prependTo('#alerts');
	};
    initToolbarBootstrapBindings();  
	$('#editor').wysiwyg({ fileUploadError: showErrorAlert} );
	window.prettyPrint && prettyPrint();

	$("#reset-btn").on('click', function (e) {

	    var values =
        {
            "ResourceHtml": "",
            "SaveHtml": false,
            "ClientId": "@ViewBag.ClientId",
            "Section": "@ViewBag.Section"
        }

        $.post("@Url.Action("ResetDefaultHtml")", values, function (data) {
            $("#preview-container").html('').html(data);
            $("#editor").html('').html(data.replace("<h4>Resources</h4>", ""));
        });

    });

	$("#save-btn").on('click', function (e) {

	    var values =
        {
            "ResourceHtml": "<h4>Resources</h4>" + $('#editor').cleanHtml(),
            "SaveHtml": true,
            "ClientId": "@ViewBag.ClientId",
            "Section": "@ViewBag.Section"
        }

	    $.post("@Url.Action("Dashboard")", values, function (data) {
	        $("#preview-container").html('').html(data);
	    });

  });

	$("#preview-btn").on('click', function (e) {

	    var values =
        {
            "ResourceHtml": "<h4>Resources</h4>" + $('#editor').cleanHtml(),
            "SaveHtml": false,
            "ClientId": "@ViewBag.ClientId",
            "Section" : "@ViewBag.Section"
        }

	    $.post("@Url.Action("Dashboard")", values, function (data) {
	        $("#preview-container").html('').html(data);
        });

	    
	});

  });
</script>